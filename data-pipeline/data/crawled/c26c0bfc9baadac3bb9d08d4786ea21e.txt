[Open in app](https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F172181b396d4&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---top_nav_layout_nav----------------------------------)

[Sign up](https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&source=post_page---top_nav_layout_nav-----------------------global_nav-----------)

[Sign in](https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&source=post_page---top_nav_layout_nav-----------------------global_nav-----------)

[](https://medium.com/?source=---top_nav_layout_nav----------------------------------)

[Write](https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---top_nav_layout_nav-----------------------new_post_topnav-----------)

[](https://medium.com/search?source=---top_nav_layout_nav----------------------------------)

[Sign up](https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&source=post_page---top_nav_layout_nav-----------------------global_nav-----------)

[Sign in](https://medium.com/m/signin?operation=login&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&source=post_page---top_nav_layout_nav-----------------------global_nav-----------)

![](https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png)

Top highlight

# Advanced RAG 01: Small-to-Big Retrieval

## Child-Parent RecursiveRetriever and Sentence Window Retrieval with LlamaIndex

[![Sophia Yang, Ph.D.](https://miro.medium.com/v2/resize:fill:88:88/1*-vbXNP0zsgxLYxKYOVPtnQ.jpeg)](https://sophiamyang.medium.com/?source=post_page---byline--172181b396d4--------------------------------)

[![Towards Data Science](https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg)](https://towardsdatascience.com/?source=post_page---byline--172181b396d4--------------------------------)

[Sophia Yang, Ph.D.](https://sophiamyang.medium.com/?source=post_page---byline--172181b396d4--------------------------------)

·

[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fae9cae9cbcd2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&user=Sophia+Yang%2C+Ph.D.&userId=ae9cae9cbcd2&source=post_page-ae9cae9cbcd2--byline--172181b396d4---------------------post_header-----------)

Published in

[Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--172181b396d4--------------------------------)

·

7 min read

·

Nov 4, 2023

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F172181b396d4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&user=Sophia+Yang%2C+Ph.D.&userId=ae9cae9cbcd2&source=---header_actions--172181b396d4---------------------clap_footer-----------)

434

5

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F172181b396d4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&source=---header_actions--172181b396d4---------------------bookmark_footer-----------)

[Listen](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2Fplans%3Fdimension%3Dpost_audio_button%26postId%3D172181b396d4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&source=---header_actions--172181b396d4---------------------post_audio_button-----------)

Share

RAG (Retrieval-Augmented Generation) systems retrieve relevant information from a given knowledge base, thereby allowing it to generate factual, contextually relevant, and domain-specific information. However, RAG faces a lot of challenges when it comes to effectively retrieving relevant information and generating high-quality responses. In this series of blog posts/videos, I will walk through advanced RAG techniques aiming at optimizing the RAG workflow and addressing the challenges in naive RAG systems.

The first technique is called **small-to-big retrieval**. In basic RAG pipelines, we embed a big text chunk for retrieval, and this exact same text chunk is used for synthesis. But sometimes embedding/retrieving big text chunks can feel suboptimal. There might be a lot of filler text in a big text chunk that hides the semantic representation, leading to worse retrieval. What if we could embed/retrieve based on smaller, more targeted chunks, but still have enough context for the LLM to synthesize a response? Specifically, decoupling text chunks used for retrieval vs. the text chunks used for synthesis could be advantageous. Using smaller text chunks enhances the accuracy of retrieval, while larger text chunks offer more contextual information. The concept behind small-to-big retrieval is to use smaller text chunks during the retrieval process and subsequently provide the larger text chunk to which the retrieved text belongs to the large language model.

There are two primary techniques:

  1. **Smaller Child Chunks Referring to Bigger Parent Chunks** : Fetch smaller chunks during retrieval first, then reference the parent IDs, and return the bigger chunks.
  2. **Sentence Window Retrieval:** Fetch a single sentence during retrieval and return a window of text around the sentence.



In this blog post, we will dive into the implementations of these two methods in LlamaIndex. Why am I not doing it in LangChain? Because there are already lots of resources out there on advanced RAG with LangChain. I’d rather not duplicate the effort. Also, I use both LangChain and LlamaIndex. It’s best to understand more tools and use them flexibly.

You can find all the code in this [notebook](https://colab.research.google.com/github/sophiamyang/demos/blob/main/advanced_rag_small_to_big.ipynb).

# Basic RAG Review

Let’s start with a basic RAG implementation with 4 simple steps:

**Step 1. Loading Documents**

We use a PDFReader to load a PDF file, and combine each page of the document into one Document object.

```
loader = PDFReader()docs0 = loader.load_data(file=Path("llama2.pdf"))doc_text = "\n\n".join([d.get_content() for d in docs0])docs = [Document(text=doc_text)]
```

**Step 2. Parsing Documents into Text Chunks (Nodes)**

Then we split the document into text chunks, which are called “Nodes” in LlamaIndex, where we define the chuck size as 1024. The default node IDs are random text strings, we can then format our node ID to follow a certain format.

```
node_parser = SimpleNodeParser.from_defaults(chunk_size=1024)base_nodes = node_parser.get_nodes_from_documents(docs)for idx, node in enumerate(base_nodes):node.id_ = f"node-{idx}"
```

**Step 3. Select Embedding Model and LLM**

We need to define two models:

  * The embedding model is used to create vector embeddings for each of the text chunks. Here we are calling the [FlagEmbedding](https://huggingface.co/BAAI/bge-small-en) model from Hugging Face.
  * LLM: user query and the relevant text chunks are fed into the LLM so that it can generate answers with relevant context.



We can bundle these two models together in the ServiceContext and use them later in the indexing and querying steps.

```
embed_model = resolve_embed_model(“local:BAAI/bge-small-en”)llm = OpenAI(model="gpt-3.5-turbo")service_context = ServiceContext.from_defaults(llm=llm, embed_model=embed_model)
```

**Step 4. Create Index, retriever, and query engine**

Index, retriever, and query engine are three basic components for asking questions about your data or documents:

  * Index is a data structure that allows us to retrieve relevant information quickly for a user query from external documents. The Vector Store Index takes the text chunks/Nodes and then creates vector embeddings of the text of every node, ready to be queried by an LLM.

```
base_index = VectorStoreIndex(base_nodes, service_context=service_context)
```

  * Retriever is used for fetching and retrieving relevant information given user query.

```
base_retriever = base_index.as_retriever(similarity_top_k=2)
```

  * Query engine is built on top of the index and retriever providing a generic interface to ask questions about your data.

```
query_engine_base = RetrieverQueryEngine.from_args( base_retriever, service_context=service_context)response = query_engine_base.query( "Can you tell me about the key concepts for safety finetuning")print(str(response))
```

![](https://miro.medium.com/v2/resize:fit:700/0*WhEGQ39oX-MEGh_T)

# Advanced Method 1: Smaller Child Chunks Referring to Bigger Parent Chunks

In the previous section, we used a fixed chunk size of 1024 for both retrieval and synthesis. In this section, we are going to explore how to use smaller child chunks for retrieval and refer to bigger parent chunks for synthesis. The first step is to create smaller child chunks:

**Step 1: Create Smaller Child Chunks**

For each of the text chunks with chunk size 1024, we create even smaller text chunks:

  * 8 text chunks of size 128
  * 4 text chunks of size 256
  * 2 text chunks of size 512



We append the original text chunk of size 1024 to the list of text chunks.

```
sub_chunk_sizes = [128, 256, 512]sub_node_parsers = [ SimpleNodeParser.from_defaults(chunk_size=c) for c in sub_chunk_sizes]all_nodes = []for base_node in base_nodes: for n in sub_node_parsers: sub_nodes = n.get_nodes_from_documents([base_node]) sub_inodes = [ IndexNode.from_text_node(sn, base_node.node_id) for sn in sub_nodes ] all_nodes.extend(sub_inodes) # also add original node to node original_node = IndexNode.from_text_node(base_node, base_node.node_id) all_nodes.append(original_node)all_nodes_dict = {n.node_id: n for n in all_nodes}
```

When we take a look at all the text chunks `all_nodes_dict`, we can see many smaller chunks are associated with each of the original text chunks for example `node-0`. In fact, all of the smaller chunks reference to the large chunk in the metadata with index_id pointing to the index ID of the larger chunk.

![](https://miro.medium.com/v2/resize:fit:700/0*lM9jaUT8iNWMthjn)

**Step 2: Create Index, retriever, and query engine**

  * Index: Create vector embeddings of all the text chunks.

```
vector_index_chunk = VectorStoreIndex( all_nodes, service_context=service_context)
```

  * Retriever: the key here is to use a **RecursiveRetriever** to traverse node relationships and fetch nodes based on “references”. This retriever will recursively explore links from nodes to other retrievers/query engines. For any retrieved nodes, if any of the nodes are IndexNodes, then it will explore the linked retriever/query engine and query that.

```
vector_retriever_chunk = vector_index_chunk.as_retriever(similarity_top_k=2)retriever_chunk = RecursiveRetriever( "vector", retriever_dict={"vector": vector_retriever_chunk}, node_dict=all_nodes_dict, verbose=True,)
```

When we ask a question and retrieve the most relevant text chunks, it will actually retrieve the text chunk with the node id pointing to the parent chunk and thus retrieve the parent chunk.

![](https://miro.medium.com/v2/resize:fit:700/0*8Cc9P8HsvgyQEW1l)

  * Now with the same steps as before, we can create a query engine as a generic interface to ask questions about our data.

```
query_engine_chunk = RetrieverQueryEngine.from_args( retriever_chunk, service_context=service_context)response = query_engine_chunk.query( "Can you tell me about the key concepts for safety finetuning")print(str(response))
```

![](https://miro.medium.com/v2/resize:fit:700/0*2VfiBXe3_0_oh9zt)

# Advanced Method 2: Sentence Window Retrieval

To achieve an even more fine-grained retrieval, instead of using smaller child chunks, we can parse the documents into a single sentence per chunk.

In this case, single sentences will be similar to the “child” chunk concept we mentioned in method 1. The sentence “window” (5 sentences on either side of the original sentence) will be similar to the “parent” chunk concept. In other words, we use the single sentences during retrieval and pass the retrieved sentence with the sentence window to the LLM.

**Step 1: Create sentence window node parser**

```
# create the sentence window node parser w/ default settingsnode_parser = SentenceWindowNodeParser.from_defaults( window_size=3, window_metadata_key="window", original_text_metadata_key="original_text",)sentence_nodes = node_parser.get_nodes_from_documents(docs)sentence_index = VectorStoreIndex(sentence_nodes, service_context=service_context)
```

**Step 2: Create query engine**

When we create the query engine, we can replace the sentence with the sentence window using the MetadataReplacementPostProcessor, so that the window of the sentences get sent to the LLM.

```
query_engine = sentence_index.as_query_engine( similarity_top_k=2, # the target key defaults to `window` to match the node_parser's default node_postprocessors=[ MetadataReplacementPostProcessor(target_metadata_key="window") ],)window_response = query_engine.query( "Can you tell me about the key concepts for safety finetuning")print(window_response)
```

The Sentence Window Retrieval was able to answer the question “Can you tell me about the key concepts for safety finetuning”:

![](https://miro.medium.com/v2/resize:fit:700/0*UP8zq7Cvlp9-R63g)

Here you can see the actual sentence retrieved and the window of the sentence, which provides more context and details.

![](https://miro.medium.com/v2/resize:fit:700/0*SNakisDYccy2EaXu)

# **Conclusion**

In this blog, we explored how to use small-to-big retrieval to improve RAG, focusing on the Child-Parent RecursiveRetriever and Sentence Window Retrieval with LlamaIndex. In future blog posts, we will dive deeper into other tricks and tips. Stay tuned for more on this exciting journey into advanced RAG techniques!

# References:

  * <https://docs.llamaindex.ai/en/latest/examples/node_postprocessor/MetadataReplacementDemo.html>
  * <https://docs.llamaindex.ai/en/stable/examples/retrievers/recursive_retriever_nodes.html>



![](https://miro.medium.com/v2/resize:fit:700/1*urHmJosMAaUSF_VXGMShFA.png)

. . .

By [Sophia Yang](https://www.linkedin.com/in/sophiamyang/) on November 4, 2023

Connect with me on [LinkedIn](https://www.linkedin.com/in/sophiamyang/), [Twitter](https://twitter.com/sophiamyang), and [YouTube](https://www.youtube.com/SophiaYangDS) and join the DS/ML [Book Club](https://dsbookclub.github.io/) ❤️

![](https://miro.medium.com/v2/da:true/resize:fit:0/5c50caa54067fd622d2f0fac18392213bf92f6e2fae89b691e62bceb40885e74)

## Sign up to discover human stories that deepen your understanding of the world.

## Free

Distraction-free reading. No ads.

Organize your knowledge with lists and highlights.

Tell your story. Find your audience.

[Sign up for free](https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&source=---post_footer_upsell--172181b396d4---------------------lo_non_moc_upsell-----------)

## Membership

Read member-only stories

Support writers you read most

Earn money for your writing

Listen to audio narrations

Read offline with the Medium app

[Try for $5/month](https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fplans&source=---post_footer_upsell--172181b396d4---------------------lo_non_moc_upsell-----------)

[Llamaindex](https://medium.com/tag/llamaindex?source=post_page-----172181b396d4--------------------------------)

[Rag](https://medium.com/tag/rag?source=post_page-----172181b396d4--------------------------------)

[Llm](https://medium.com/tag/llm?source=post_page-----172181b396d4--------------------------------)

[Data Science](https://medium.com/tag/data-science?source=post_page-----172181b396d4--------------------------------)

[Machine Learning](https://medium.com/tag/machine-learning?source=post_page-----172181b396d4--------------------------------)

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F172181b396d4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&user=Sophia+Yang%2C+Ph.D.&userId=ae9cae9cbcd2&source=---footer_actions--172181b396d4---------------------clap_footer-----------)

434

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Ftowards-data-science%2F172181b396d4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&user=Sophia+Yang%2C+Ph.D.&userId=ae9cae9cbcd2&source=---footer_actions--172181b396d4---------------------clap_footer-----------)

434

5

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F172181b396d4&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&source=---footer_actions--172181b396d4---------------------bookmark_footer-----------)

[![Towards Data Science](https://miro.medium.com/v2/resize:fill:96:96/1*CJe3891yB1A1mzMdqemkdg.jpeg)](https://towardsdatascience.com/?source=post_page---post_publication_info--172181b396d4--------------------------------)

[![Towards Data Science](https://miro.medium.com/v2/resize:fill:128:128/1*CJe3891yB1A1mzMdqemkdg.jpeg)](https://towardsdatascience.com/?source=post_page---post_publication_info--172181b396d4--------------------------------)

[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page---post_publication_info--172181b396d4---------------------follow_profile-----------)

## [Published in Towards Data Science](https://towardsdatascience.com/?source=post_page---post_publication_info--172181b396d4--------------------------------)

[794K Followers](/followers?source=post_page---post_publication_info--172181b396d4--------------------------------)

·[Last published just now](/explaining-the-attention-mechanism-29a0e7b448a9?source=post_page---post_publication_info--172181b396d4--------------------------------)

Your home for data science and AI. The world’s leading publication for data science, data analytics, data engineering, machine learning, and artificial intelligence professionals.

[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fcollection%2Ftowards-data-science&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&collection=Towards+Data+Science&collectionId=7f60cf5620c9&source=post_page---post_publication_info--172181b396d4---------------------follow_profile-----------)

[![Sophia Yang, Ph.D.](https://miro.medium.com/v2/resize:fill:96:96/1*-vbXNP0zsgxLYxKYOVPtnQ.jpeg)](https://sophiamyang.medium.com/?source=post_page---post_author_info--172181b396d4--------------------------------)

[![Sophia Yang, Ph.D.](https://miro.medium.com/v2/resize:fill:128:128/1*-vbXNP0zsgxLYxKYOVPtnQ.jpeg)](https://sophiamyang.medium.com/?source=post_page---post_author_info--172181b396d4--------------------------------)

[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fae9cae9cbcd2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&user=Sophia+Yang%2C+Ph.D.&userId=ae9cae9cbcd2&source=post_page-ae9cae9cbcd2--post_author_info--172181b396d4---------------------follow_profile-----------)

## [Written by Sophia Yang, Ph.D.](https://sophiamyang.medium.com/?source=post_page---post_author_info--172181b396d4--------------------------------)

[5.9K Followers](https://sophiamyang.medium.com/followers?source=post_page---post_author_info--172181b396d4--------------------------------)

·[84 Following](https://medium.com/@sophiamyang/following?source=post_page---post_author_info--172181b396d4--------------------------------)

🤝 LinkedIn: [www.linkedin.com/in/sophiamyang](http://www.linkedin.com/in/sophiamyang) 🐦 Twitter: [twitter.com/sophiamyang](http://twitter.com/sophiamyang) ✨✨✨ ✨ 🎥 YouTube: [youtube.com/SophiaYangDS](http://youtube.com/SophiaYangDS) ✨✨✨📚Book Club: [dsbookclub.github.io](http://dsbookclub.github.io)

[Follow](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fae9cae9cbcd2&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&user=Sophia+Yang%2C+Ph.D.&userId=ae9cae9cbcd2&source=post_page-ae9cae9cbcd2--post_author_info--172181b396d4---------------------follow_profile-----------)

## Responses (5)

[](https://policy.medium.com/medium-rules-30e5502c4eb4?source=post_page---post_responses--172181b396d4--------------------------------)

[What are your thoughts?](https://medium.com/m/signin?operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fadvanced-rag-01-small-to-big-retrieval-172181b396d4&source=---post_responses--172181b396d4---------------------respond_sidebar-----------)

Cancel

Respond

Respond

Also publish to my profile

[![Joey Yang-Li](https://miro.medium.com/v2/resize:fill:32:32/1*l83cIynbQiMMi7YymyVcBg.jpeg)](https://medium.com/@joeyyangli?source=post_page---post_responses--172181b396d4----0----------------------------)

[Joey Yang-Li](https://medium.com/@joeyyangli?source=post_page---post_responses--172181b396d4----0----------------------------)

[Dec 14, 2023](https://medium.com/@joeyyangli/hi-sophia-4ce34b4eae9c?source=post_page---post_responses--172181b396d4----0----------------------------)

```


Hi Sophia,

One thing I think might be helpful for the RAGs is that PDFs can be highly structured -- as a tree structure of containers and nodes such as sections, headings, paragraphs, tables, and lists. I put my thoughts into a couple of posts on my…more


```

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F4ce34b4eae9c&operation=register&redirect=https%3A%2F%2Fmedium.com%2F%40joeyyangli%2Fhi-sophia-4ce34b4eae9c&user=Joey+Yang-Li&userId=fd90920ed7a0&source=---post_responses--4ce34b4eae9c----0-----------------respond_sidebar-----------)

6

Reply

[![Lukas](https://miro.medium.com/v2/resize:fill:32:32/0*G0n1oo0-AXHkNEMO)](https://medium.com/@locke.torfnase?source=post_page---post_responses--172181b396d4----1----------------------------)

[Lukas](https://medium.com/@locke.torfnase?source=post_page---post_responses--172181b396d4----1----------------------------)

[Apr 22, 2024](https://medium.com/@locke.torfnase/hi-sophia-thank-you-for-the-great-explanation-c812d158231f?source=post_page---post_responses--172181b396d4----1----------------------------)

sub_chunk_sizes = [128, 256, 512]

```


Hi Sophia, thank you for the great explanation! I was wondering why you included several size chunks for each parent chunk? Wouldn't it suffice to only divide into the smallest chunk size? So what do I need the 256 and 512 chunks for? Thanks and best, Lukas


```

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2Fc812d158231f&operation=register&redirect=https%3A%2F%2Fmedium.com%2F%40locke.torfnase%2Fhi-sophia-thank-you-for-the-great-explanation-c812d158231f&user=Lukas&userId=3d1232eda736&source=---post_responses--c812d158231f----1-----------------respond_sidebar-----------)

Reply

[![Abdrakhmanova Nelli](https://miro.medium.com/v2/resize:fill:32:32/1*dmbNkD5D-u45r44go_cf0g.png)](https://medium.com/@abd.nelly?source=post_page---post_responses--172181b396d4----2----------------------------)

[Abdrakhmanova Nelli](https://medium.com/@abd.nelly?source=post_page---post_responses--172181b396d4----2----------------------------)

[Dec 5, 2023](https://medium.com/@abd.nelly/what-is-the-analogy-for-these-techniques-in-langchain-f6d96bc8bebd?source=post_page---post_responses--172181b396d4----2----------------------------)

```


What is the analogy for these techniques in LangChain?


```

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2Ff6d96bc8bebd&operation=register&redirect=https%3A%2F%2Fmedium.com%2F%40abd.nelly%2Fwhat-is-the-analogy-for-these-techniques-in-langchain-f6d96bc8bebd&user=Abdrakhmanova+Nelli&userId=b7fc7f242770&source=---post_responses--f6d96bc8bebd----2-----------------respond_sidebar-----------)

Reply

See all responses

## More from Sophia Yang, Ph.D. and Towards Data Science

![The AI Web Search Landscape](https://miro.medium.com/v2/resize:fit:679/1*Z_nsHUX2wImhj7OSKsRYbA.png)

[![Sophia Yang, Ph.D.](https://miro.medium.com/v2/resize:fill:20:20/1*-vbXNP0zsgxLYxKYOVPtnQ.jpeg)](https://sophiamyang.medium.com/?source=post_page---author_recirc--172181b396d4----0---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

[Sophia Yang, Ph.D.](https://sophiamyang.medium.com/?source=post_page---author_recirc--172181b396d4----0---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

## [The AI Web Search LandscapeThe present and the future](https://sophiamyang.medium.com/the-ai-web-search-landscape-5b4ad0e67505?source=post_page---author_recirc--172181b396d4----0---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

Dec 31, 2024

[835](https://sophiamyang.medium.com/the-ai-web-search-landscape-5b4ad0e67505?source=post_page---author_recirc--172181b396d4----0---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F5b4ad0e67505&operation=register&redirect=https%3A%2F%2Fsophiamyang.medium.com%2Fthe-ai-web-search-landscape-5b4ad0e67505&source=---author_recirc--172181b396d4----0-----------------bookmark_preview----22aad877_cd10_4adb_a7d3_4faae508cc22-------)

![Why Generative-AI Apps’ Quality Often Sucks and What to Do About It](https://miro.medium.com/v2/resize:fit:679/1*ze5_bcSOz29WLvry5gi0bg.jpeg)

[![Towards Data Science](https://miro.medium.com/v2/resize:fill:20:20/1*CJe3891yB1A1mzMdqemkdg.jpeg)](https://towardsdatascience.com/?source=post_page---author_recirc--172181b396d4----1---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

In

[Towards Data Science](https://towardsdatascience.com/?source=post_page---author_recirc--172181b396d4----1---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

by

[Dr. Marcel Müller](https://medium.com/@marcelmueller?source=post_page---author_recirc--172181b396d4----1---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

## [Why Generative-AI Apps’ Quality Often Sucks and What to Do About ItHow to get from PoCs to tested high-quality applications in production](/why-generative-ai-apps-quality-often-sucks-and-what-to-do-about-it-f84407f263c3?source=post_page---author_recirc--172181b396d4----1---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

1d ago

[1192](/why-generative-ai-apps-quality-often-sucks-and-what-to-do-about-it-f84407f263c3?source=post_page---author_recirc--172181b396d4----1---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ff84407f263c3&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fwhy-generative-ai-apps-quality-often-sucks-and-what-to-do-about-it-f84407f263c3&source=---author_recirc--172181b396d4----1-----------------bookmark_preview----22aad877_cd10_4adb_a7d3_4faae508cc22-------)

![A selection of used images within the article.](https://miro.medium.com/v2/resize:fit:679/1*Rc_H4sx40bLqTFkRFq3SVQ.png)

[![Towards Data Science](https://miro.medium.com/v2/resize:fill:20:20/1*CJe3891yB1A1mzMdqemkdg.jpeg)](https://towardsdatascience.com/?source=post_page---author_recirc--172181b396d4----2---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

In

[Towards Data Science](https://towardsdatascience.com/?source=post_page---author_recirc--172181b396d4----2---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

by

[Jens Linden, PhD](https://medium.com/@jens-linden?source=post_page---author_recirc--172181b396d4----2---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

## [How Most Organizations Get Data Strategy Wrong — and How to Fix ItRedefining Data Strategy to Drive Competitive Advantage with Data, Analytics and AI](/how-most-organizations-get-data-strategy-wrong-and-how-to-fix-it-b8afa59f1533?source=post_page---author_recirc--172181b396d4----2---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

1d ago

[3907](/how-most-organizations-get-data-strategy-wrong-and-how-to-fix-it-b8afa59f1533?source=post_page---author_recirc--172181b396d4----2---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fb8afa59f1533&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-most-organizations-get-data-strategy-wrong-and-how-to-fix-it-b8afa59f1533&source=---author_recirc--172181b396d4----2-----------------bookmark_preview----22aad877_cd10_4adb_a7d3_4faae508cc22-------)

![Multiclass logistic regression from scratch](https://miro.medium.com/v2/resize:fit:679/1*geF_kuekdlrdR5K13QH3GA.jpeg)

[![Towards Data Science](https://miro.medium.com/v2/resize:fill:20:20/1*CJe3891yB1A1mzMdqemkdg.jpeg)](https://towardsdatascience.com/?source=post_page---author_recirc--172181b396d4----3---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

In

[Towards Data Science](https://towardsdatascience.com/?source=post_page---author_recirc--172181b396d4----3---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

by

[Sophia Yang, Ph.D.](https://sophiamyang.medium.com/?source=post_page---author_recirc--172181b396d4----3---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

## [Multiclass logistic regression from scratchMath and gradient decent implementation in Python](/multiclass-logistic-regression-from-scratch-9cc0007da372?source=post_page---author_recirc--172181b396d4----3---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

Apr 18, 2021

[3932](/multiclass-logistic-regression-from-scratch-9cc0007da372?source=post_page---author_recirc--172181b396d4----3---------------------22aad877_cd10_4adb_a7d3_4faae508cc22-------)

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F9cc0007da372&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fmulticlass-logistic-regression-from-scratch-9cc0007da372&source=---author_recirc--172181b396d4----3-----------------bookmark_preview----22aad877_cd10_4adb_a7d3_4faae508cc22-------)

[See all from Sophia Yang, Ph.D.](https://sophiamyang.medium.com/?source=post_page---author_recirc--172181b396d4--------------------------------)

[See all from Towards Data Science](https://towardsdatascience.com/?source=post_page---author_recirc--172181b396d4--------------------------------)

## Recommended from Medium

![Agentic chuning offers near human-level performance in chunking](https://miro.medium.com/v2/resize:fit:679/1*wzK0hP8qqmrpv2ds6_R9uw.jpeg)

[![Towards Data Science](https://miro.medium.com/v2/resize:fill:20:20/1*CJe3891yB1A1mzMdqemkdg.jpeg)](https://towardsdatascience.com/?source=post_page---read_next_recirc--172181b396d4----0---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

In

[Towards Data Science](https://towardsdatascience.com/?source=post_page---read_next_recirc--172181b396d4----0---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

by

[Thuwarakesh Murallie](https://thuwarakesh.medium.com/?source=post_page---read_next_recirc--172181b396d4----0---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

## [How to Achieve Near Human-Level Performance in Chunking for RAGsThe costly yet powerful splitting technique for superior RAG retrieval](/agentic-chunking-for-rags-091beccd94b1?source=post_page---read_next_recirc--172181b396d4----0---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

Aug 26, 2024

[6446](/agentic-chunking-for-rags-091beccd94b1?source=post_page---read_next_recirc--172181b396d4----0---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F091beccd94b1&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fagentic-chunking-for-rags-091beccd94b1&source=---read_next_recirc--172181b396d4----0-----------------bookmark_preview----94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

![KAG: Knowledge Augmented Generation A Pratical Guide better than Rag](https://miro.medium.com/v2/resize:fit:679/0*wgaGAub1630gg3JI.jpg)

[![Artificial Intelligence in Plain English](https://miro.medium.com/v2/resize:fill:20:20/1*9zAmnK08gUCmZX7q0McVKw@2x.png)](https://ai.plainenglish.io/?source=post_page---read_next_recirc--172181b396d4----1---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

In

[Artificial Intelligence in Plain English](https://ai.plainenglish.io/?source=post_page---read_next_recirc--172181b396d4----1---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

by

[Sarayavalasaravikiran](https://medium.com/@sarayavalasaravikiran?source=post_page---read_next_recirc--172181b396d4----1---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

## [KAG: Knowledge Augmented Generation A Pratical Guide better than Rag1. What is KAG?](https://ai.plainenglish.io/kag-knowledge-augmented-generation-a-pratical-guide-better-than-rag-eaaa1793369c?source=post_page---read_next_recirc--172181b396d4----1---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

Jan 8

[735](https://ai.plainenglish.io/kag-knowledge-augmented-generation-a-pratical-guide-better-than-rag-eaaa1793369c?source=post_page---read_next_recirc--172181b396d4----1---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Feaaa1793369c&operation=register&redirect=https%3A%2F%2Fai.plainenglish.io%2Fkag-knowledge-augmented-generation-a-pratical-guide-better-than-rag-eaaa1793369c&source=---read_next_recirc--172181b396d4----1-----------------bookmark_preview----94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

## Lists

[![](https://miro.medium.com/v2/resize:fill:48:48/0*r4yjMpEmqzHCUvWC.jpg)![](https://miro.medium.com/v2/resize:fill:48:48/1*bv2KUVNLi2sFNjBTdoBmWw.png)![](https://miro.medium.com/v2/resize:fill:48:48/0*zsngbTOmFCy6sUCx.jpeg)Predictive Modeling w/ Python20 stories·1792 saves](https://medium.com/@ben.putney/list/predictive-modeling-w-python-e3668ea008e1?source=post_page---read_next_recirc--172181b396d4--------------------------------)

[![Principal Component Analysis for ML](https://miro.medium.com/v2/resize:fill:48:48/1*swd_PY6vTCyPnsgBYoFZfA.png)![Time Series Analysis](https://miro.medium.com/v2/resize:fill:48:48/1*8sSAHftNwd_RNJ3k4VA0pA.png)![deep learning cheatsheet for beginner](https://miro.medium.com/v2/resize:fill:48:48/1*uNyD4yNMH-DnOel1wzxOOA.png)Practical Guides to Machine Learning10 stories·2168 saves](https://destingong.medium.com/list/practical-guides-to-machine-learning-a877c2a39884?source=post_page---read_next_recirc--172181b396d4--------------------------------)

[![](https://miro.medium.com/v2/resize:fill:48:48/1*nVAk9E_TnPIK8Kv57PJruA.png)![](https://miro.medium.com/v2/resize:fill:48:48/1*790FdGYUonUX4X3IyQr1Og.png)![](https://miro.medium.com/v2/da:true/resize:fill:48:48/1*o1k0mQo3BuyIkmg-rI2Eiw.gif)Natural Language Processing1889 stories·1551 saves](https://medium.com/@AMGAS14/list/natural-language-processing-0a856388a93a?source=post_page---read_next_recirc--172181b396d4--------------------------------)

[![](https://miro.medium.com/v2/resize:fill:48:48/1*Fwpkf8H5PwNrzSzMYUFjjA.png)![](https://miro.medium.com/v2/resize:fill:48:48/1*G49cai7vIuhFeSwb4LCuSQ.jpeg)![](https://miro.medium.com/v2/resize:fill:48:48/1*HlJ2e41GVVzzjWYiX0dU1g.png)data science and AI40 stories·320 saves](https://medium.com/@grexe/list/data-science-and-ai-35d21381d956?source=post_page---read_next_recirc--172181b396d4--------------------------------)

![You are an absolute moron for believing in the hype of “AI Agents”.](https://miro.medium.com/v2/resize:fit:679/1*ZGZHRi3VSgirewnjtto9hA.png)

[![Austin Starks](https://miro.medium.com/v2/resize:fill:20:20/1*dfww62lW8x8sVZNbLx5aCA.jpeg)](https://medium.com/@austin-starks?source=post_page---read_next_recirc--172181b396d4----0---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

[Austin Starks](https://medium.com/@austin-starks?source=post_page---read_next_recirc--172181b396d4----0---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

## [You are an absolute moron for believing in the hype of “AI Agents”.All of my articles are 100% free to read. Non-members can read for free by clicking my friend link!](https://medium.com/@austin-starks/you-are-an-absolute-moron-for-believing-in-the-hype-of-ai-agents-c0f760e7e48e?source=post_page---read_next_recirc--172181b396d4----0---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

Jan 11

[4.3K180](https://medium.com/@austin-starks/you-are-an-absolute-moron-for-believing-in-the-hype-of-ai-agents-c0f760e7e48e?source=post_page---read_next_recirc--172181b396d4----0---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc0f760e7e48e&operation=register&redirect=https%3A%2F%2Fmedium.com%2F%40austin-starks%2Fyou-are-an-absolute-moron-for-believing-in-the-hype-of-ai-agents-c0f760e7e48e&source=---read_next_recirc--172181b396d4----0-----------------bookmark_preview----94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

![KAG: A Better Alternative to RAG for Domain-Specific Knowledge Applications](https://miro.medium.com/v2/resize:fit:679/1*pUsPQDfCoeQKDwrMMqB2hw.png)

[![Artificial Intelligence in Plain English](https://miro.medium.com/v2/resize:fill:20:20/1*9zAmnK08gUCmZX7q0McVKw@2x.png)](https://ai.plainenglish.io/?source=post_page---read_next_recirc--172181b396d4----1---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

In

[Artificial Intelligence in Plain English](https://ai.plainenglish.io/?source=post_page---read_next_recirc--172181b396d4----1---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

by

[Sarayavalasaravikiran](https://medium.com/@sarayavalasaravikiran?source=post_page---read_next_recirc--172181b396d4----1---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

## [KAG: A Better Alternative to RAG for Domain-Specific Knowledge ApplicationsThe rise of large language models (LLMs) has brought remarkable breakthroughs in natural language processing (NLP). Retrieval-Augmented…](https://ai.plainenglish.io/kag-a-better-alternative-to-rag-for-domain-specific-knowledge-applications-046054bedde1?source=post_page---read_next_recirc--172181b396d4----1---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

Jan 4

[33620](https://ai.plainenglish.io/kag-a-better-alternative-to-rag-for-domain-specific-knowledge-applications-046054bedde1?source=post_page---read_next_recirc--172181b396d4----1---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F046054bedde1&operation=register&redirect=https%3A%2F%2Fai.plainenglish.io%2Fkag-a-better-alternative-to-rag-for-domain-specific-knowledge-applications-046054bedde1&source=---read_next_recirc--172181b396d4----1-----------------bookmark_preview----94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

![How to Build a Knowledge Graph in Minutes \(And Make It Enterprise-Ready\)](https://miro.medium.com/v2/resize:fit:679/0*g4x6_WGJEDaWUSmS)

[![Towards Data Science](https://miro.medium.com/v2/resize:fill:20:20/1*CJe3891yB1A1mzMdqemkdg.jpeg)](https://towardsdatascience.com/?source=post_page---read_next_recirc--172181b396d4----2---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

In

[Towards Data Science](https://towardsdatascience.com/?source=post_page---read_next_recirc--172181b396d4----2---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

by

[Thuwarakesh Murallie](https://thuwarakesh.medium.com/?source=post_page---read_next_recirc--172181b396d4----2---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

## [How to Build a Knowledge Graph in Minutes (And Make It Enterprise-Ready)I tried and failed creating one—but it was when LLMs were not a thing!](/enterprise-ready-knowledge-graphs-96028d863e8c?source=post_page---read_next_recirc--172181b396d4----2---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

Jan 13

[7946](/enterprise-ready-knowledge-graphs-96028d863e8c?source=post_page---read_next_recirc--172181b396d4----2---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F96028d863e8c&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Fenterprise-ready-knowledge-graphs-96028d863e8c&source=---read_next_recirc--172181b396d4----2-----------------bookmark_preview----94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

![RAG 101: Chunking Strategies](https://miro.medium.com/v2/resize:fit:679/1*4T9GoHUA2jZwlrATD_7vKw.png)

[![Towards Data Science](https://miro.medium.com/v2/resize:fill:20:20/1*CJe3891yB1A1mzMdqemkdg.jpeg)](https://towardsdatascience.com/?source=post_page---read_next_recirc--172181b396d4----3---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

In

[Towards Data Science](https://towardsdatascience.com/?source=post_page---read_next_recirc--172181b396d4----3---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

by

[Shanmukha Ranganath](https://memsranga.com/?source=post_page---read_next_recirc--172181b396d4----3---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

## [RAG 101: Chunking StrategiesWhy, When, and How to chunk for enhanced RAG. Build intuition to develop chunking strategies.](/rag-101-chunking-strategies-fdc6f6c2aaec?source=post_page---read_next_recirc--172181b396d4----3---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

Oct 5, 2024

[5452](/rag-101-chunking-strategies-fdc6f6c2aaec?source=post_page---read_next_recirc--172181b396d4----3---------------------94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

[](https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Ffdc6f6c2aaec&operation=register&redirect=https%3A%2F%2Ftowardsdatascience.com%2Frag-101-chunking-strategies-fdc6f6c2aaec&source=---read_next_recirc--172181b396d4----3-----------------bookmark_preview----94b11cf9_044e_4434_9e8d_0a7115eb47cc-------)

[See more recommendations](https://medium.com/?source=post_page---read_next_recirc--172181b396d4--------------------------------)

[Help](https://help.medium.com/hc/en-us?source=post_page-----172181b396d4--------------------------------)

[Status](https://medium.statuspage.io/?source=post_page-----172181b396d4--------------------------------)

[About](https://medium.com/about?autoplay=1&source=post_page-----172181b396d4--------------------------------)

[Careers](https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----172181b396d4--------------------------------)

[Press](pressinquiries@medium.com?source=post_page-----172181b396d4--------------------------------)

[Blog](https://blog.medium.com/?source=post_page-----172181b396d4--------------------------------)

[Privacy](https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----172181b396d4--------------------------------)

[Terms](https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----172181b396d4--------------------------------)

[Text to speech](https://speechify.com/medium?source=post_page-----172181b396d4--------------------------------)

[Teams](https://medium.com/business?source=post_page-----172181b396d4--------------------------------)

To make Medium work, we log user data. By using Medium, you agree to our [Privacy Policy](https://policy.medium.com/medium-privacy-policy-f03bf92035c9), including cookie policy.
