{
    "id": "ca06caf9331fd97567d9a39faec22b76",
    "metadata": {
        "id": "ca06caf9331fd97567d9a39faec22b76",
        "url": "https://github.com/dottxt-ai/outlines/",
        "title": "GitHub - dottxt-ai/outlines: Structured Text Generation",
        "properties": {
            "description": "Structured Text Generation. Contribute to dottxt-ai/outlines development by creating an account on GitHub.",
            "keywords": null,
            "author": null,
            "og:image": "https://opengraph.githubassets.com/4fa15224256f2fa65df02cc3f54d5ea3ae3ac381135401fb92ad003abf8cb016/dottxt-ai/outlines",
            "og:image:alt": "Structured Text Generation. Contribute to dottxt-ai/outlines development by creating an account on GitHub.",
            "og:image:width": "1200",
            "og:image:height": "600",
            "og:site_name": "GitHub",
            "og:type": "object",
            "og:title": "GitHub - dottxt-ai/outlines: Structured Text Generation",
            "og:url": "https://github.com/dottxt-ai/outlines",
            "og:description": "Structured Text Generation. Contribute to dottxt-ai/outlines development by creating an account on GitHub.",
            "twitter:image": "https://opengraph.githubassets.com/4fa15224256f2fa65df02cc3f54d5ea3ae3ac381135401fb92ad003abf8cb016/dottxt-ai/outlines",
            "twitter:site": "@github",
            "twitter:card": "summary_large_image",
            "twitter:title": "GitHub - dottxt-ai/outlines: Structured Text Generation",
            "twitter:description": "Structured Text Generation. Contribute to dottxt-ai/outlines development by creating an account on GitHub."
        }
    },
    "parent_metadata": {
        "id": "0e5e9b45acd5db1311a5839ef0e7e038",
        "url": "https://www.notion.so/Utilities-0e5e9b45acd5db1311a5839ef0e7e038",
        "title": "Utilities",
        "properties": {
            "Type": "Leaf"
        }
    },
    "content": "[Skip to content](#start-of-content)\n\n## Navigation Menu\n\nToggle navigation\n\n[ ](/)\n\n[ Sign in ](/login?return_to=https%3A%2F%2Fgithub.com%2Fdottxt-ai%2Foutlines%2F)\n\n  * Product \n\n    * [ GitHub Copilot Write better code with AI  ](https://github.com/features/copilot)\n    * [ Security Find and fix vulnerabilities  ](https://github.com/features/security)\n    * [ Actions Automate any workflow  ](https://github.com/features/actions)\n    * [ Codespaces Instant dev environments  ](https://github.com/features/codespaces)\n    * [ Issues Plan and track work  ](https://github.com/features/issues)\n    * [ Code Review Manage code changes  ](https://github.com/features/code-review)\n    * [ Discussions Collaborate outside of code  ](https://github.com/features/discussions)\n    * [ Code Search Find more, search less  ](https://github.com/features/code-search)\n\nExplore\n    * [ All features ](https://github.com/features)\n    * [ Documentation ](https://docs.github.com)\n    * [ GitHub Skills ](https://skills.github.com)\n    * [ Blog ](https://github.blog)\n\n  * Solutions \n\nBy company size\n    * [ Enterprises ](https://github.com/enterprise)\n    * [ Small and medium teams ](https://github.com/team)\n    * [ Startups ](https://github.com/enterprise/startups)\n    * [ Nonprofits ](/solutions/industry/nonprofits)\n\nBy use case\n    * [ DevSecOps ](/solutions/use-case/devsecops)\n    * [ DevOps ](/solutions/use-case/devops)\n    * [ CI/CD ](/solutions/use-case/ci-cd)\n    * [ View all use cases ](/solutions/use-case)\n\nBy industry\n    * [ Healthcare ](/solutions/industry/healthcare)\n    * [ Financial services ](/solutions/industry/financial-services)\n    * [ Manufacturing ](/solutions/industry/manufacturing)\n    * [ Government ](/solutions/industry/government)\n    * [ View all industries ](/solutions/industry)\n\n[ View all solutions ](/solutions)\n\n  * Resources \n\nTopics\n    * [ AI ](/resources/articles/ai)\n    * [ DevOps ](/resources/articles/devops)\n    * [ Security ](/resources/articles/security)\n    * [ Software Development ](/resources/articles/software-development)\n    * [ View all ](/resources/articles)\n\nExplore\n    * [ Learning Pathways ](https://resources.github.com/learn/pathways)\n    * [ White papers, Ebooks, Webinars ](https://resources.github.com)\n    * [ Customer Stories ](https://github.com/customer-stories)\n    * [ Partners ](https://partner.github.com)\n    * [ Executive Insights ](https://github.com/solutions/executive-insights)\n\n  * Open Source \n\n    * [ GitHub Sponsors Fund open source developers  ](/sponsors)\n\n    * [ The ReadME Project GitHub community articles  ](https://github.com/readme)\n\nRepositories\n    * [ Topics ](https://github.com/topics)\n    * [ Trending ](https://github.com/trending)\n    * [ Collections ](https://github.com/collections)\n\n  * Enterprise \n\n    * [ Enterprise platform AI-powered developer platform  ](/enterprise)\n\nAvailable add-ons\n    * [ Advanced Security Enterprise-grade security features  ](https://github.com/enterprise/advanced-security)\n    * [ GitHub Copilot Enterprise-grade AI features  ](/features/copilot#enterprise)\n    * [ Premium Support Enterprise-grade 24/7 support  ](/premium-support)\n\n  * [Pricing](https://github.com/pricing)\n\n\n\nSearch or jump to...\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch \n\nClear\n\n[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)\n\n#  Provide feedback \n\nWe read every piece of feedback, and take your input very seriously.\n\nInclude my email address so I can be contacted\n\nCancel  Submit feedback \n\n#  Saved searches \n\n## Use saved searches to filter your results more quickly\n\nName\n\nQuery\n\nTo see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). \n\nCancel  Create saved search \n\n[ Sign in ](/login?return_to=https%3A%2F%2Fgithub.com%2Fdottxt-ai%2Foutlines%2F)\n\n[ Sign up ](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=dottxt-ai%2Foutlines) Reseting focus\n\nYou signed in with another tab or window. [Reload]() to refresh your session. You signed out in another tab or window. [Reload]() to refresh your session. You switched accounts on another tab or window. [Reload]() to refresh your session. Dismiss alert\n\n{{ message }}\n\n[ dottxt-ai ](/dottxt-ai) / **[outlines](/dottxt-ai/outlines) ** Public\n\n  * [ Notifications ](/login?return_to=%2Fdottxt-ai%2Foutlines) You must be signed in to change notification settings\n  * [ Fork 545 ](/login?return_to=%2Fdottxt-ai%2Foutlines)\n  * [ Star  10.4k ](/login?return_to=%2Fdottxt-ai%2Foutlines)\n\n\n\n\nStructured Text Generation \n\n[dottxt-ai.github.io/outlines/](https://dottxt-ai.github.io/outlines/ \"https://dottxt-ai.github.io/outlines/\")\n\n### License\n\n[ Apache-2.0 license ](/dottxt-ai/outlines/blob/main/LICENSE)\n\n[ 10.4k stars ](/dottxt-ai/outlines/stargazers) [ 545 forks ](/dottxt-ai/outlines/forks) [ Branches ](/dottxt-ai/outlines/branches) [ Tags ](/dottxt-ai/outlines/tags) [ Activity ](/dottxt-ai/outlines/activity)\n\n[ Star  ](/login?return_to=%2Fdottxt-ai%2Foutlines)\n\n[ Notifications ](/login?return_to=%2Fdottxt-ai%2Foutlines) You must be signed in to change notification settings\n\n  * [ Code ](/dottxt-ai/outlines)\n  * [ Issues 234 ](/dottxt-ai/outlines/issues)\n  * [ Pull requests 37 ](/dottxt-ai/outlines/pulls)\n  * [ Discussions ](/dottxt-ai/outlines/discussions)\n  * [ Actions ](/dottxt-ai/outlines/actions)\n  * [ Projects 0 ](/dottxt-ai/outlines/projects)\n  * [ Security ](/dottxt-ai/outlines/security)\n  * [ Insights ](/dottxt-ai/outlines/pulse)\n\n\n\nAdditional navigation options\n\n  * [ Code  ](/dottxt-ai/outlines)\n  * [ Issues  ](/dottxt-ai/outlines/issues)\n  * [ Pull requests  ](/dottxt-ai/outlines/pulls)\n  * [ Discussions  ](/dottxt-ai/outlines/discussions)\n  * [ Actions  ](/dottxt-ai/outlines/actions)\n  * [ Projects  ](/dottxt-ai/outlines/projects)\n  * [ Security  ](/dottxt-ai/outlines/security)\n  * [ Insights  ](/dottxt-ai/outlines/pulse)\n\n\n\n# dottxt-ai/outlines\n\nmain\n\n[**7** Branches](/dottxt-ai/outlines/branches)[**60** Tags](/dottxt-ai/outlines/tags)\n\n[](/dottxt-ai/outlines/branches)[](/dottxt-ai/outlines/tags)\n\nGo to file\n\nCode\n\n## Folders and files\n\nName| Name| Last commit message| Last commit date  \n---|---|---|---  \n  \n## Latest commit\n\n## History\n\n[807 Commits](/dottxt-ai/outlines/commits/main/)[](/dottxt-ai/outlines/commits/main/)  \n[.github](/dottxt-ai/outlines/tree/main/.github \".github\")| [.github](/dottxt-ai/outlines/tree/main/.github \".github\")  \n[benchmarks](/dottxt-ai/outlines/tree/main/benchmarks \"benchmarks\")| [benchmarks](/dottxt-ai/outlines/tree/main/benchmarks \"benchmarks\")  \n[docs](/dottxt-ai/outlines/tree/main/docs \"docs\")| [docs](/dottxt-ai/outlines/tree/main/docs \"docs\")  \n[examples](/dottxt-ai/outlines/tree/main/examples \"examples\")| [examples](/dottxt-ai/outlines/tree/main/examples \"examples\")  \n[outlines](/dottxt-ai/outlines/tree/main/outlines \"outlines\")| [outlines](/dottxt-ai/outlines/tree/main/outlines \"outlines\")  \n[tests](/dottxt-ai/outlines/tree/main/tests \"tests\")| [tests](/dottxt-ai/outlines/tree/main/tests \"tests\")  \n[.gitignore](/dottxt-ai/outlines/blob/main/.gitignore \".gitignore\")| [.gitignore](/dottxt-ai/outlines/blob/main/.gitignore \".gitignore\")  \n[.pre-commit-config.yaml](/dottxt-ai/outlines/blob/main/.pre-commit-config.yaml \".pre-commit-config.yaml\")| [.pre-commit-config.yaml](/dottxt-ai/outlines/blob/main/.pre-commit-config.yaml \".pre-commit-config.yaml\")  \n[.readthedocs.yaml](/dottxt-ai/outlines/blob/main/.readthedocs.yaml \".readthedocs.yaml\")| [.readthedocs.yaml](/dottxt-ai/outlines/blob/main/.readthedocs.yaml \".readthedocs.yaml\")  \n[Dockerfile](/dottxt-ai/outlines/blob/main/Dockerfile \"Dockerfile\")| [Dockerfile](/dottxt-ai/outlines/blob/main/Dockerfile \"Dockerfile\")  \n[LICENSE](/dottxt-ai/outlines/blob/main/LICENSE \"LICENSE\")| [LICENSE](/dottxt-ai/outlines/blob/main/LICENSE \"LICENSE\")  \n[README.md](/dottxt-ai/outlines/blob/main/README.md \"README.md\")| [README.md](/dottxt-ai/outlines/blob/main/README.md \"README.md\")  \n[environment.yml](/dottxt-ai/outlines/blob/main/environment.yml \"environment.yml\")| [environment.yml](/dottxt-ai/outlines/blob/main/environment.yml \"environment.yml\")  \n[mkdocs.yml](/dottxt-ai/outlines/blob/main/mkdocs.yml \"mkdocs.yml\")| [mkdocs.yml](/dottxt-ai/outlines/blob/main/mkdocs.yml \"mkdocs.yml\")  \n[pyproject.toml](/dottxt-ai/outlines/blob/main/pyproject.toml \"pyproject.toml\")| [pyproject.toml](/dottxt-ai/outlines/blob/main/pyproject.toml \"pyproject.toml\")  \n[requirements-doc.txt](/dottxt-ai/outlines/blob/main/requirements-doc.txt \"requirements-doc.txt\")| [requirements-doc.txt](/dottxt-ai/outlines/blob/main/requirements-doc.txt \"requirements-doc.txt\")  \n[setup.cfg](/dottxt-ai/outlines/blob/main/setup.cfg \"setup.cfg\")| [setup.cfg](/dottxt-ai/outlines/blob/main/setup.cfg \"setup.cfg\")  \nView all files  \n  \n## Repository files navigation\n\n  * [README](#)\n  * [Apache-2.0 license](#)\n\n\n\n[![Outlines Logo](/dottxt-ai/outlines/raw/main/docs/assets/images/logo.png)](/dottxt-ai/outlines/blob/main/docs/assets/images/logo.png)\n\n🗒️ _Make LLMs speak the language of every application._ 🗒️\n\nMade with ❤👷️ by the team at [.txt](https://dottxt.co).\n\n[![Documentation](https://camo.githubusercontent.com/499a9db83be7dabab071235ffea8709129acf4568c201d6031ee4103b2f9b5e6/68747470733a2f2f696d672e736869656c64732e696f2f72656164746865646f63732f6f75746c696e6573)](https://dottxt-ai.github.io/outlines/latest/welcome/) [![Contributors](https://camo.githubusercontent.com/35942007797e41137baa0e828b241c6edf5f40b40bf817856005e4c5ff60ccca/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f636f6e7472696275746f72732f646f747478742d61692f6f75746c696e65733f7374796c653d666c61742d737175617265266c6f676f3d676974687562266c6f676f436f6c6f723d776869746526636f6c6f723d454345464634)](https://github.com/dottxt-ai/outlines/graphs/contributors) [![Downloads](https://camo.githubusercontent.com/6418dba5532d571c1f0d73b9528988c8b1249ec2542779dff024b398ecef5084/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f6f75746c696e65733f636f6c6f723d383941433642266c6f676f3d707974686f6e266c6f676f436f6c6f723d7768697465267374796c653d666c61742d737175617265)](https://pypistats.org/packages/outlines) [![Discord](https://camo.githubusercontent.com/ff249d8f05f8a37d82860d11f4af860563511909b5844670741a6ebec7e6195a/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f313138323331363232353238343535343739333f636f6c6f723d383141314331266c6f676f3d646973636f7264266c6f676f436f6c6f723d7768697465267374796c653d666c61742d737175617265)](https://discord.gg/R9DSu34mGd)\n\n[Youtube channel](https://www.youtube.com/@dottxt-ai) | [.txt blog](https://blog.dottxt.co/) | [Twitter](https://twitter.com/dottxtai)\n\n```\npip install outlines\n```\n\nFirst time here? Go to our [setup guide](https://dottxt-ai.github.io/outlines/latest/welcome/)\n\n## Features\n\n[](#features)\n\n  * 🤖 [Multiple model integrations](https://dottxt-ai.github.io/outlines/latest/installation): OpenAI, transformers, llama.cpp, exllama2, mamba\n  * 🖍️ Simple and powerful prompting primitives based on the [Jinja templating engine](https://jinja.palletsprojects.com/)\n  * 🚄 [Multiple choices](#multiple-choices), [type constraints](#type-constraint) and dynamic stopping\n  * ⚡ Fast [regex-structured generation](#efficient-regex-structured-generation)\n  * 🔥 Fast [JSON generation](#efficient-json-generation-following-a-pydantic-model) following a JSON schema or a Pydantic model\n  * 📝 [Grammar-structured generation](#using-context-free-grammars-to-guide-generation)\n  * 🐍 Interleave completions with loops, conditionals, and custom Python functions\n  * 💾 Caching of generations\n  * 🗂️ Batch inference\n  * 🎲 Sample with the greedy, multinomial and beam search algorithms (and more to come!)\n  * 🚀 [Serve with vLLM](https://dottxt-ai.github.io/outlines/latest/reference/serve/vllm), with official Docker image, [`outlinesdev/outlines`](https://hub.docker.com/r/outlinesdev/outlines)!\n\n\n\nOutlines has new releases and features coming every week. Make sure to ⭐ star and 👀 watch this repository, follow [@dottxtai](https://twitter.com/dottxtai) to stay up to date!\n\n## Why should I use structured generation?\n\n[](#why-should-i-use-structured-generation)\n\n  * It doesn't add any overhead during inference (cost-free)\n  * It allows Open Source models to beat closed source models ([Mistral](https://x.com/dottxtai/status/1797692104023363765), [GPT-4](https://x.com/dottxtai/status/1798443290913853770))\n  * [It speeds up inference](http://blog.dottxt.co/coalescence.html)\n  * [It improves the performance of base models (GSM8K)](http://blog.dottxt.co/performance-gsm8k.html)\n  * [It improves the performance of finetuned models (CoNNL)](https://predibase.com/blog/lorax-outlines-better-json-extraction-with-structured-generation-and-lora)\n  * [It improves model efficiency (less examples needed)](https://huggingface.co/blog/evaluation-structured-outputs)\n\n\n\n## .txt company\n\n[](#txt-company)\n\n[![Outlines Logo](/dottxt-ai/outlines/raw/main/docs/assets/images/dottxt.png)](/dottxt-ai/outlines/blob/main/docs/assets/images/dottxt.png)\n\nWe started a company to keep pushing the boundaries of structured generation. Learn more about [.txt](https://twitter.com/dottxtai), and [give our .json API a try](https://h1xbpbfsf0w.typeform.com/to/ZgBCvJHF) if you need a hosted solution ✨\n\n## Structured generation\n\n[](#structured-generation)\n\nThe first step towards reliability of systems that include large language models is to ensure that there is a well-defined interface between their output and user-defined code. **Outlines** provides ways to control the generation of language models to make their output more predictable.\n\n### Multiple choices\n\n[](#multiple-choices)\n\nYou can reduce the completion to a choice between multiple possibilities:\n\n```\nimport outlines model = outlines.models.transformers(\"microsoft/Phi-3-mini-4k-instruct\") prompt = \"\"\"You are a sentiment-labelling assistant. Is the following review positive or negative? Review: This restaurant is just awesome! \"\"\" generator = outlines.generate.choice(model, [\"Positive\", \"Negative\"]) answer = generator(prompt)\n```\n\nYou can also pass these choices through en enum:\n\n```\nfrom enum import Enum import outlines class Sentiment(str, Enum): positive = \"Positive\" negative = \"Negative\" model = outlines.models.transformers(\"microsoft/Phi-3-mini-4k-instruct\") prompt = \"\"\"You are a sentiment-labelling assistant. Is the following review positive or negative? Review: This restaurant is just awesome! \"\"\" generator = outlines.generate.choice(model, Sentiment) answer = generator(prompt)\n```\n\n### Type constraint\n\n[](#type-constraint)\n\nYou can instruct the model to only return integers or floats:\n\n```\nimport outlines model = outlines.models.transformers(\"WizardLM/WizardMath-7B-V1.1\") prompt = \"<s>result of 9 + 9 = 18</s><s>result of 1 + 2 = \" answer = outlines.generate.format(model, int)(prompt) print(answer) # 3 prompt = \"sqrt(2)=\" generator = outlines.generate.format(model, float) answer = generator(prompt, max_tokens=10) print(answer) # 1.41421356\n```\n\n### Efficient regex-structured generation\n\n[](#efficient-regex-structured-generation)\n\nOutlines also comes with fast regex-structured generation. In fact, the `choice` and `format` functions above all use regex-structured generation under the hood:\n\n```\nimport outlines model = outlines.models.transformers(\"microsoft/Phi-3-mini-4k-instruct\") prompt = \"What is the IP address of the Google DNS servers? \" generator = outlines.generate.text(model) unstructured = generator(prompt, max_tokens=30) generator = outlines.generate.regex( model, r\"((25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\\\.){3}(25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\", ) structured = generator(prompt, max_tokens=30) print(unstructured) # What is the IP address of the Google DNS servers? # # Passive DNS servers are at DNS servers that are private. # In other words, both IP servers are private. The database # does not contain Chelsea Manning print(structured) # What is the IP address of the Google DNS servers? # 2.2.6.1\n```\n\nUnlike other libraries, regex-structured generation in Outlines is almost as fast as non-structured generation.\n\n### Efficient JSON generation following a Pydantic model\n\n[](#efficient-json-generation-following-a-pydantic-model)\n\nOutlines allows to guide the generation process so the output is _guaranteed_ to follow a [JSON schema](https://json-schema.org/) or [Pydantic model](https://docs.pydantic.dev/latest/):\n\n```\nfrom enum import Enum from pydantic import BaseModel, constr import outlines import torch class Weapon(str, Enum): sword = \"sword\" axe = \"axe\" mace = \"mace\" spear = \"spear\" bow = \"bow\" crossbow = \"crossbow\" class Armor(str, Enum): leather = \"leather\" chainmail = \"chainmail\" plate = \"plate\" class Character(BaseModel): name: constr(max_length=10) age: int armor: Armor weapon: Weapon strength: int model = outlines.models.transformers(\"microsoft/Phi-3-mini-4k-instruct\") # Construct structured sequence generator generator = outlines.generate.json(model, Character) # Draw a sample seed = 789001 character = generator(\"Give me a character description\", seed=seed) print(repr(character)) # Character(name='Anderson', age=28, armor=<Armor.chainmail: 'chainmail'>, weapon=<Weapon.sword: 'sword'>, strength=8) character = generator(\"Give me an interesting character description\") print(repr(character)) # Character(name='Vivian Thr', age=44, armor=<Armor.plate: 'plate'>, weapon=<Weapon.crossbow: 'crossbow'>, strength=125)\n```\n\nThe method works with union types, optional types, arrays, nested schemas, etc. Some field constraints are [not supported yet](https://github.com/dottxt-ai/outlines/issues/215), but everything else should work.\n\n### Efficient JSON generation following a JSON Schema\n\n[](#efficient-json-generation-following-a-json-schema)\n\nSometimes you just want to be able to pass a JSON Schema instead of a Pydantic model. We've got you covered:\n\n```\nimport outlines schema = '''{ \"title\": \"Character\", \"type\": \"object\", \"properties\": { \"name\": { \"title\": \"Name\", \"maxLength\": 10, \"type\": \"string\" }, \"age\": { \"title\": \"Age\", \"type\": \"integer\" }, \"armor\": {\"$ref\": \"#/definitions/Armor\"}, \"weapon\": {\"$ref\": \"#/definitions/Weapon\"}, \"strength\": { \"title\": \"Strength\", \"type\": \"integer\" } }, \"required\": [\"name\", \"age\", \"armor\", \"weapon\", \"strength\"], \"definitions\": { \"Armor\": { \"title\": \"Armor\", \"description\": \"An enumeration.\", \"enum\": [\"leather\", \"chainmail\", \"plate\"], \"type\": \"string\" }, \"Weapon\": { \"title\": \"Weapon\", \"description\": \"An enumeration.\", \"enum\": [\"sword\", \"axe\", \"mace\", \"spear\", \"bow\", \"crossbow\"], \"type\": \"string\" } } }''' model = outlines.models.transformers(\"microsoft/Phi-3-mini-4k-instruct\") generator = outlines.generate.json(model, schema) character = generator(\"Give me a character description\")\n```\n\n### Using context-free grammars to guide generation\n\n[](#using-context-free-grammars-to-guide-generation)\n\nFormal grammars rule the world, and Outlines makes them rule LLMs too. You can pass any context-free grammar in the EBNF format and Outlines will generate an output that is valid to this grammar:\n\n```\nimport outlines arithmetic_grammar = \"\"\" ?start: expression ?expression: term ((\"+\" | \"-\") term)* ?term: factor ((\"*\" | \"/\") factor)* ?factor: NUMBER | \"-\" factor | \"(\" expression \")\" %import common.NUMBER \"\"\" model = outlines.models.transformers(\"WizardLM/WizardMath-7B-V1.1\") generator = outlines.generate.cfg(model, arithmetic_grammar) sequence = generator(\"Alice had 4 apples and Bob ate 2. Write an expression for Alice's apples:\") print(sequence) # (8-2)\n```\n\nThis was a very simple grammar, and you can use `outlines.generate.cfg` to generate syntactically valid Python, SQL, and much more than this. Any kind of structured text, really. All you have to do is search for \"X EBNF grammar\" on the web, and take a look at the [Outlines `grammars` module](https://github.com/dottxt-ai/outlines/tree/main/outlines/grammars).\n\n### Open functions\n\n[](#open-functions)\n\nOutlines can infer the structure of the output from the signature of a function. The result is a dictionary, and can be passed directly to the function using the usual dictionary expansion syntax `**`:\n\n```\nimport outlines def add(a: int, b: int): return a + b model = outlines.models.transformers(\"WizardLM/WizardMath-7B-V1.1\") generator = outlines.generate.json(model, add) result = generator(\"Return json with two integers named a and b respectively. a is odd and b even.\") print(add(**result)) # 3\n```\n\nA great advantage of passing functions directly to specify the structure is that the structure of the LLM will change with the function's definition. No need to change the code at several places!\n\nYou can also embed various functions into an enum to generate params:\n\n```\nfrom enum import Enum from functools import partial import outlines def add(a: int, b: int) -> int: return a + b def mul(c: float, d: float) -> float: return c * d class Operation(Enum): add = partial(add) mul = partial(mul) model = outlines.models.transformers(\"WizardLM/WizardMath-7B-V1.1\") generator = outlines.generate.json(model, Operation) result = generator(\"Return json with two float named c and d respectively. c is negative and d greater than 1.0.\") print(result) # {'c': -3.14, 'd': 1.5}\n```\n\n## Prompting\n\n[](#prompting)\n\nBuilding prompts can get messy. **Outlines** makes it easier to write and manage prompts by encapsulating templates inside \"template functions\".\n\nThese functions make it possible to neatly separate the prompt logic from the general program logic; they can be imported from other modules and libraries.\n\nTemplate functions require no superfluous abstraction, they use the Jinja2 templating engine to help build complex prompts in a concise manner:\n\n```\nimport outlines examples = [ (\"The food was disgusting\", \"Negative\"), (\"We had a fantastic night\", \"Positive\"), (\"Recommended\", \"Positive\"), (\"The waiter was rude\", \"Negative\") ] @outlines.prompt def labelling(to_label, examples): \"\"\"You are a sentiment-labelling assistant. {% for example in examples %} {{ example[0] }} // {{ example[1] }} {% endfor %} {{ to_label }} // \"\"\" model = outlines.models.transformers(\"microsoft/Phi-3-mini-4k-instruct\") prompt = labelling(\"Just awesome\", examples) answer = outlines.generate.text(model)(prompt, max_tokens=100)\n```\n\n## Join us\n\n[](#join-us)\n\n  * 💡 **Have an idea?** Come chat with us on [Discord](https://discord.gg/R9DSu34mGd)\n  * 🔨 **Want to contribute?** Consult our [contribution guide](https://dottxt-ai.github.io/outlines/latest/community/contribute/).\n  * 🐞 **Found a bug?** Open an [issue](https://github.com/dottxt-ai/outlines/issues)\n\n\n\n## Cite Outlines\n\n[](#cite-outlines)\n\n```\n`@article{willard2023efficient, title={Efficient Guided Generation for LLMs}, author={Willard, Brandon T and Louf, R{\\'e}mi}, journal={arXiv preprint arXiv:2307.09702}, year={2023} } `\n```\n\n## About\n\nStructured Text Generation \n\n[dottxt-ai.github.io/outlines/](https://dottxt-ai.github.io/outlines/ \"https://dottxt-ai.github.io/outlines/\")\n\n### Topics\n\n[ json ](/topics/json \"Topic: json\") [ regex ](/topics/regex \"Topic: regex\") [ cfg ](/topics/cfg \"Topic: cfg\") [ symbolic-ai ](/topics/symbolic-ai \"Topic: symbolic-ai\") [ prompt-engineering ](/topics/prompt-engineering \"Topic: prompt-engineering\") [ llms ](/topics/llms \"Topic: llms\") [ generative-ai ](/topics/generative-ai \"Topic: generative-ai\") [ structured-generation ](/topics/structured-generation \"Topic: structured-generation\")\n\n### Resources\n\n[ Readme ](#readme-ov-file)\n\n### License\n\n[ Apache-2.0 license ](#Apache-2.0-1-ov-file)\n\n[ Activity](/dottxt-ai/outlines/activity)\n\n[ Custom properties](/dottxt-ai/outlines/custom-properties)\n\n### Stars\n\n[ **10.4k** stars](/dottxt-ai/outlines/stargazers)\n\n### Watchers\n\n[ **51** watching](/dottxt-ai/outlines/watchers)\n\n### Forks\n\n[ **545** forks](/dottxt-ai/outlines/forks)\n\n[ Report repository ](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fdottxt-ai%2Foutlines&report=dottxt-ai+%28user%29)\n\n##  [Releases 60](/dottxt-ai/outlines/releases)\n\n[ Outlines v0.1.13 Latest  Jan 15, 2025 ](/dottxt-ai/outlines/releases/tag/0.1.13)\n\n[+ 59 releases](/dottxt-ai/outlines/releases)\n\n##  [Used by 1.1k](/dottxt-ai/outlines/network/dependents)\n\n[\n\n  * ![@eingrid](https://avatars.githubusercontent.com/u/17329902?s=64&v=4)\n  * ![@Wang-Haining](https://avatars.githubusercontent.com/u/54771420?s=64&v=4)\n  * ![@iRaduS](https://avatars.githubusercontent.com/u/21007741?s=64&v=4)\n  * ![@QFOI](https://avatars.githubusercontent.com/u/43920293?s=64&v=4)\n  * ![@MagnusS0](https://avatars.githubusercontent.com/u/97634880?s=64&v=4)\n  * ![@prhbrt](https://avatars.githubusercontent.com/u/7011110?s=64&v=4)\n  * ![@UpstageAI](https://avatars.githubusercontent.com/u/13376165?s=64&v=4)\n  * ![@DarioushK1](https://avatars.githubusercontent.com/u/28906512?s=64&v=4)\n\n+ 1,067  ](/dottxt-ai/outlines/network/dependents)\n\n##  [Contributors 129](/dottxt-ai/outlines/graphs/contributors)\n\n  * [ ![@rlouf](https://avatars.githubusercontent.com/u/3885044?s=64&v=4) ](https://github.com/rlouf)\n  * [ ![@brandonwillard](https://avatars.githubusercontent.com/u/971601?s=64&v=4) ](https://github.com/brandonwillard)\n  * [ ![@lapp0](https://avatars.githubusercontent.com/u/2560255?s=64&v=4) ](https://github.com/lapp0)\n  * [ ![@cpfiffer](https://avatars.githubusercontent.com/u/422990?s=64&v=4) ](https://github.com/cpfiffer)\n  * [ ![@benlipkin](https://avatars.githubusercontent.com/u/38060297?s=64&v=4) ](https://github.com/benlipkin)\n  * [ ![@RobinPicard](https://avatars.githubusercontent.com/u/83579270?s=64&v=4) ](https://github.com/RobinPicard)\n  * [ ![@alonsosilvaallende](https://avatars.githubusercontent.com/u/30263736?s=64&v=4) ](https://github.com/alonsosilvaallende)\n  * [ ![@parkervg](https://avatars.githubusercontent.com/u/44219290?s=64&v=4) ](https://github.com/parkervg)\n  * [ ![@eitanturok](https://avatars.githubusercontent.com/u/150733043?s=64&v=4) ](https://github.com/eitanturok)\n  * [ ![@yvan-sraka](https://avatars.githubusercontent.com/u/705213?s=64&v=4) ](https://github.com/yvan-sraka)\n  * [ ![@leloykun](https://avatars.githubusercontent.com/u/14250344?s=64&v=4) ](https://github.com/leloykun)\n  * [ ![@saattrupdan](https://avatars.githubusercontent.com/u/47701536?s=64&v=4) ](https://github.com/saattrupdan)\n  * [ ![@jrysana](https://avatars.githubusercontent.com/u/51100181?s=64&v=4) ](https://github.com/jrysana)\n  * [ ![@jqueguiner](https://avatars.githubusercontent.com/u/690878?s=64&v=4) ](https://github.com/jqueguiner)\n\n\n\n[+ 115 contributors](/dottxt-ai/outlines/graphs/contributors)\n\n## Languages\n\n  * [ Python 99.9% ](/dottxt-ai/outlines/search?l=python)\n  * [ Dockerfile 0.1% ](/dottxt-ai/outlines/search?l=dockerfile)\n\n\n\n## Footer\n\n[ ](https://github.com \"GitHub\") © 2025 GitHub, Inc. \n\n### Footer navigation\n\n  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)\n  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)\n  * [Security](https://github.com/security)\n  * [Status](https://www.githubstatus.com/)\n  * [Docs](https://docs.github.com/)\n  * [Contact](https://support.github.com?tags=dotcom-footer)\n  * Manage cookies \n  * Do not share my personal information \n\n\n\nYou can’t perform that action at this time. \n",
    "content_quality_score": 0.2,
    "summary": null,
    "child_urls": [
        "https://github.com/dottxt-ai/outlines/#start-of-content",
        "https://github.com/",
        "https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fdottxt-ai%2Foutlines%2F",
        "https://github.com/features/copilot",
        "https://github.com/features/security",
        "https://github.com/features/actions",
        "https://github.com/features/codespaces",
        "https://github.com/features/issues",
        "https://github.com/features/code-review",
        "https://github.com/features/discussions",
        "https://github.com/features/code-search",
        "https://github.com/features",
        "https://docs.github.com",
        "https://skills.github.com",
        "https://github.com/enterprise",
        "https://github.com/team",
        "https://github.com/enterprise/startups",
        "https://github.com/solutions/industry/nonprofits",
        "https://github.com/solutions/use-case/devsecops",
        "https://github.com/solutions/use-case/devops",
        "https://github.com/solutions/use-case/ci-cd",
        "https://github.com/solutions/use-case",
        "https://github.com/solutions/industry/healthcare",
        "https://github.com/solutions/industry/financial-services",
        "https://github.com/solutions/industry/manufacturing",
        "https://github.com/solutions/industry/government",
        "https://github.com/solutions/industry",
        "https://github.com/solutions",
        "https://github.com/resources/articles/ai",
        "https://github.com/resources/articles/devops",
        "https://github.com/resources/articles/security",
        "https://github.com/resources/articles/software-development",
        "https://github.com/resources/articles",
        "https://resources.github.com/learn/pathways",
        "https://resources.github.com",
        "https://github.com/customer-stories",
        "https://partner.github.com",
        "https://github.com/solutions/executive-insights",
        "https://github.com/sponsors",
        "https://github.com/readme",
        "https://github.com/topics",
        "https://github.com/trending",
        "https://github.com/collections",
        "https://github.com/enterprise/advanced-security",
        "https://github.com/features/copilot#enterprise",
        "https://github.com/premium-support",
        "https://github.com/pricing",
        "https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax",
        "https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=dottxt-ai%2Foutlines",
        "https://github.com/dottxt-ai",
        "https://github.com/dottxt-ai/outlines",
        "https://github.com/login?return_to=%2Fdottxt-ai%2Foutlines",
        "https://github.com/dottxt-ai/outlines/blob/main/LICENSE",
        "https://github.com/dottxt-ai/outlines/stargazers",
        "https://github.com/dottxt-ai/outlines/forks",
        "https://github.com/dottxt-ai/outlines/branches",
        "https://github.com/dottxt-ai/outlines/tags",
        "https://github.com/dottxt-ai/outlines/activity",
        "https://github.com/dottxt-ai/outlines/issues",
        "https://github.com/dottxt-ai/outlines/pulls",
        "https://github.com/dottxt-ai/outlines/discussions",
        "https://github.com/dottxt-ai/outlines/actions",
        "https://github.com/dottxt-ai/outlines/projects",
        "https://github.com/dottxt-ai/outlines/security",
        "https://github.com/dottxt-ai/outlines/pulse",
        "https://github.com/dottxt-ai/outlines/commits/main/",
        "https://github.com/dottxt-ai/outlines/tree/main/.github",
        "https://github.com/dottxt-ai/outlines/tree/main/benchmarks",
        "https://github.com/dottxt-ai/outlines/tree/main/docs",
        "https://github.com/dottxt-ai/outlines/tree/main/examples",
        "https://github.com/dottxt-ai/outlines/tree/main/outlines",
        "https://github.com/dottxt-ai/outlines/tree/main/tests",
        "https://github.com/dottxt-ai/outlines/blob/main/.gitignore",
        "https://github.com/dottxt-ai/outlines/blob/main/.pre-commit-config.yaml",
        "https://github.com/dottxt-ai/outlines/blob/main/.readthedocs.yaml",
        "https://github.com/dottxt-ai/outlines/blob/main/Dockerfile",
        "https://github.com/dottxt-ai/outlines/blob/main/README.md",
        "https://github.com/dottxt-ai/outlines/blob/main/environment.yml",
        "https://github.com/dottxt-ai/outlines/blob/main/mkdocs.yml",
        "https://github.com/dottxt-ai/outlines/blob/main/pyproject.toml",
        "https://github.com/dottxt-ai/outlines/blob/main/requirements-doc.txt",
        "https://github.com/dottxt-ai/outlines/blob/main/setup.cfg",
        "https://github.com/dottxt-ai/outlines/",
        "https://github.com/dottxt-ai/outlines/blob/main/docs/assets/images/logo.png",
        "https://github.com/dottxt-ai/outlines/graphs/contributors",
        "https://github.com/dottxt-ai/outlines/#features",
        "https://github.com/dottxt-ai/outlines/#multiple-choices",
        "https://github.com/dottxt-ai/outlines/#type-constraint",
        "https://github.com/dottxt-ai/outlines/#efficient-regex-structured-generation",
        "https://github.com/dottxt-ai/outlines/#efficient-json-generation-following-a-pydantic-model",
        "https://github.com/dottxt-ai/outlines/#using-context-free-grammars-to-guide-generation",
        "https://github.com/dottxt-ai/outlines/#why-should-i-use-structured-generation",
        "https://github.com/dottxt-ai/outlines/#txt-company",
        "https://github.com/dottxt-ai/outlines/blob/main/docs/assets/images/dottxt.png",
        "https://github.com/dottxt-ai/outlines/#structured-generation",
        "https://github.com/dottxt-ai/outlines/issues/215",
        "https://github.com/dottxt-ai/outlines/#efficient-json-generation-following-a-json-schema",
        "https://github.com/dottxt-ai/outlines/tree/main/outlines/grammars",
        "https://github.com/dottxt-ai/outlines/#open-functions",
        "https://github.com/dottxt-ai/outlines/#prompting",
        "https://github.com/dottxt-ai/outlines/#join-us",
        "https://github.com/dottxt-ai/outlines/#cite-outlines",
        "https://github.com/topics/json",
        "https://github.com/topics/regex",
        "https://github.com/topics/cfg",
        "https://github.com/topics/symbolic-ai",
        "https://github.com/topics/prompt-engineering",
        "https://github.com/topics/llms",
        "https://github.com/topics/generative-ai",
        "https://github.com/topics/structured-generation",
        "https://github.com/dottxt-ai/outlines/#readme-ov-file",
        "https://github.com/dottxt-ai/outlines/#Apache-2.0-1-ov-file",
        "https://github.com/dottxt-ai/outlines/custom-properties",
        "https://github.com/dottxt-ai/outlines/watchers",
        "https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fdottxt-ai%2Foutlines&report=dottxt-ai+%28user%29",
        "https://github.com/dottxt-ai/outlines/releases",
        "https://github.com/dottxt-ai/outlines/releases/tag/0.1.13",
        "https://github.com/dottxt-ai/outlines/network/dependents",
        "https://github.com/rlouf",
        "https://github.com/brandonwillard",
        "https://github.com/lapp0",
        "https://github.com/cpfiffer",
        "https://github.com/benlipkin",
        "https://github.com/RobinPicard",
        "https://github.com/alonsosilvaallende",
        "https://github.com/parkervg",
        "https://github.com/eitanturok",
        "https://github.com/yvan-sraka",
        "https://github.com/leloykun",
        "https://github.com/saattrupdan",
        "https://github.com/jrysana",
        "https://github.com/jqueguiner",
        "https://github.com/dottxt-ai/outlines/search?l=python",
        "https://github.com/dottxt-ai/outlines/search?l=dockerfile",
        "https://github.com",
        "https://docs.github.com/site-policy/github-terms/github-terms-of-service",
        "https://docs.github.com/site-policy/privacy-policies/github-privacy-statement",
        "https://github.com/security",
        "https://docs.github.com/",
        "https://support.github.com?tags=dotcom-footer",
        "https://github.blog",
        "https://dottxt-ai.github.io/outlines/",
        "https://dottxt.co",
        "https://dottxt-ai.github.io/outlines/latest/welcome/",
        "https://pypistats.org/packages/outlines",
        "https://discord.gg/R9DSu34mGd",
        "https://www.youtube.com/@dottxt-ai",
        "https://blog.dottxt.co/",
        "https://twitter.com/dottxtai",
        "https://dottxt-ai.github.io/outlines/latest/installation",
        "https://jinja.palletsprojects.com/",
        "https://dottxt-ai.github.io/outlines/latest/reference/serve/vllm",
        "https://hub.docker.com/r/outlinesdev/outlines",
        "https://x.com/dottxtai/status/1797692104023363765",
        "https://x.com/dottxtai/status/1798443290913853770",
        "http://blog.dottxt.co/coalescence.html",
        "http://blog.dottxt.co/performance-gsm8k.html",
        "https://predibase.com/blog/lorax-outlines-better-json-extraction-with-structured-generation-and-lora",
        "https://huggingface.co/blog/evaluation-structured-outputs",
        "https://h1xbpbfsf0w.typeform.com/to/ZgBCvJHF",
        "https://json-schema.org/",
        "https://docs.pydantic.dev/latest/",
        "https://dottxt-ai.github.io/outlines/latest/community/contribute/",
        "https://www.githubstatus.com/"
    ]
}